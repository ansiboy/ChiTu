{"version":3,"sources":["../out/Page.js"],"names":["define","require","exports","maishu_chitu_service_1","Object","defineProperty","value","Page","params","data","showing","Callbacks","shown","hiding","hidden","closing","closed","_element","element","_app","app","_displayer","displayer","_name","name","fire","on_showing","currentPage","show","then","o","on_shown","on_hiding","hide","on_hidden","on_closing","remove","on_closed","Promise","resolve","type","Service","service","error","add","sender","tagName","PageDisplayerImplement","page","previous","style","display"],"mappings":"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","sourcesContent":["define([\"require\", \"exports\", \"maishu-chitu-service\"], function (require, exports, maishu_chitu_service_1) {\r\n    \"use strict\";\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    class Page {\r\n        constructor(params) {\r\n            this.data = {};\r\n            this.showing = maishu_chitu_service_1.Callbacks();\r\n            this.shown = maishu_chitu_service_1.Callbacks();\r\n            this.hiding = maishu_chitu_service_1.Callbacks();\r\n            this.hidden = maishu_chitu_service_1.Callbacks();\r\n            this.closing = maishu_chitu_service_1.Callbacks();\r\n            this.closed = maishu_chitu_service_1.Callbacks();\r\n            this._element = params.element;\r\n            this._app = params.app;\r\n            this._displayer = params.displayer;\r\n            this.data = params.data;\r\n            this._name = params.name;\r\n        }\r\n        on_showing() {\r\n            return this.showing.fire(this, this.data);\r\n        }\r\n        on_shown() {\r\n            return this.shown.fire(this, this.data);\r\n        }\r\n        on_hiding() {\r\n            return this.hiding.fire(this, this.data);\r\n        }\r\n        on_hidden() {\r\n            return this.hidden.fire(this, this.data);\r\n        }\r\n        on_closing() {\r\n            return this.closing.fire(this, this.data);\r\n        }\r\n        on_closed() {\r\n            return this.closed.fire(this, this.data);\r\n        }\r\n        show() {\r\n            this.on_showing();\r\n            let currentPage = this._app.currentPage;\r\n            if (this == currentPage) {\r\n                currentPage = null;\r\n            }\r\n            return this._displayer.show(this, currentPage).then(o => {\r\n                this.on_shown();\r\n            });\r\n        }\r\n        hide(currentPage) {\r\n            this.on_hiding();\r\n            return this._displayer.hide(this, currentPage).then(o => {\r\n                this.on_hidden();\r\n            });\r\n        }\r\n        close() {\r\n            this.on_closing();\r\n            this._element.remove();\r\n            this.on_closed();\r\n            return Promise.resolve();\r\n        }\r\n        createService(type) {\r\n            type = type || maishu_chitu_service_1.Service;\r\n            let service = new type();\r\n            service.error.add((sender, error) => {\r\n                this._app.error.fire(this._app, error, this);\r\n            });\r\n            return service;\r\n        }\r\n        get element() {\r\n            return this._element;\r\n        }\r\n        get name() {\r\n            return this._name;\r\n        }\r\n        get app() {\r\n            return this._app;\r\n        }\r\n    }\r\n    Page.tagName = 'div';\r\n    exports.Page = Page;\r\n    class PageDisplayerImplement {\r\n        show(page, previous) {\r\n            page.element.style.display = 'block';\r\n            if (previous != null) {\r\n                previous.element.style.display = 'none';\r\n            }\r\n            return Promise.resolve();\r\n        }\r\n        hide(page, previous) {\r\n            page.element.style.display = 'none';\r\n            if (previous != null) {\r\n                previous.element.style.display = 'block';\r\n            }\r\n            return Promise.resolve();\r\n        }\r\n    }\r\n    exports.PageDisplayerImplement = PageDisplayerImplement;\r\n});\r\n"],"file":"Page.js"}